(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{4960:function(){},6759:function(){},6272:function(){},8218:function(e,t,a){Promise.resolve().then(a.bind(a,6186))},6186:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return w}});var l=a(7437),r=a(2265),n=a(8516),s={name:"Untitled design",objects:[{left:200,top:205.57577042950481,width:91.85693359375,height:32.77,originX:"left",originY:"top",type:"StaticText",metadata:{angle:0,fill:"#000",fontSize:75,template:"Femil",fontFamily:"arial",textAlign:"center",text:"Femil\nSavaliya",padding:5},canvas:{width:1883,height:942}},{top:0,left:700,originX:"left",originY:"top",scaleX:.5,scaleY:.5,type:"StaticImage",metadata:{src:"https://source.unsplash.com/random",width:"100%"},canvas:{width:1883,height:942}}],background:{type:"color",value:"#c44569"},frame:{width:1280,height:720},preview:"https://source.unsplash.com/random",id:"LOhgYV4WoviSEwwUGRmDd"};let c=e=>new Promise(t=>{let a=new Image;a.src=e,a.crossOrigin="Anonymous",a.onload=()=>{t(a)}});var i=a(8792),o=e=>{let{children:t}=e;return(0,l.jsxs)("nav",{className:"fixed-navbar",children:[(0,l.jsx)(i.default,{className:"active",href:"/",children:"Image Editor"}),t]})},d=e=>{let{onImageChange:t}=e;return(0,l.jsxs)("div",{className:"relative border-2 border-primaryBlack p-2 py-3",children:[(0,l.jsx)("h1",{className:"absolute -top-3 bg-white px-1",children:"Image"}),(0,l.jsxs)("div",{className:"relative btn btn-primary w-full cursor-pointer",children:[(0,l.jsx)("span",{children:"Upload Image"}),(0,l.jsx)("input",{type:"file",id:"img",name:"img",accept:"image/*",onChange:e=>t(e),className:"opacity-0 absolute inset-0 cursor-pointer"})]})]})},h=e=>{let{editorState:t,addText:a,textColorChange:r,textBgColorChange:n,onFontSize:s}=e;return(0,l.jsxs)("div",{className:"relative border-2 border-primaryBlack p-2 py-3",children:[(0,l.jsx)("h1",{className:"absolute -top-3 bg-white px-1",children:"Text Properties"}),(0,l.jsx)("button",{onClick:()=>a(),className:"btn btn-primary w-full mb-2",children:"Add Text"}),(0,l.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("label",{htmlFor:"text-color",children:"Text color "}),(0,l.jsx)("input",{id:"text-color",type:"color",value:t.color,size:"10",onChange:e=>r(e),className:"w-32 h-8"})]}),(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("label",{htmlFor:"text-bgcolor",children:"Background text color"}),(0,l.jsx)("input",{id:"text-bgcolor",type:"color",value:"",size:"10",onChange:e=>n(e),className:"w-32 h-8"})]}),(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("label",{htmlFor:"text-font-size",children:"Font size"}),(0,l.jsx)("input",{id:"text-font-size",type:"number",value:t.fontSize,onChange:e=>s(e),size:"10",min:"0",className:"w-32 h-8 border outline-none"})]})]})]})},m=e=>{let{textDecorationData:t,handleTextDecor:a}=e;return(0,l.jsxs)("div",{className:" relative border-2 border-primaryBlack p-2 py-3",children:[(0,l.jsx)("h1",{className:"absolute -top-3 bg-white px-1",children:"Text Decoration"}),(0,l.jsx)("div",{className:"flex flex-wrap",children:t.map(e=>(0,l.jsxs)("div",{className:"flex gap-1 items-center w-1/2",children:[(0,l.jsx)("input",{id:e.id,name:e.label,type:"checkbox",onChange:t=>{a(t,e)}}),(0,l.jsx)("label",{htmlFor:e.id,className:"mt-[2px]",children:e.label})]},e.id))})]})},g=a(2279),u=e=>{let{editorState:t,addBackground:a,removeBackground:r,onColorChange:n}=e;return(0,l.jsxs)("div",{className:"relative border-2 border-primaryBlack p-2 py-3",children:[(0,l.jsx)("h1",{className:"absolute -top-3 bg-white px-1",children:"Background Properties"}),(0,l.jsx)("button",{onClick:()=>a("https://source.unsplash.com/random/?city,night"),className:"btn btn-primary w-full mb-2",children:"Add Background Image"}),(0,l.jsx)("button",{onClick:()=>r(),className:"btn btn-secondary w-full",children:"Remove Background Image"}),(0,l.jsx)(g.Ie,{color:t.backgroundColor,onChange:n,className:"bg-color-picker"})]})},x=e=>{let{editorState:t,addTemplate:a,handleCanvasZoom:r}=e;return(0,l.jsxs)("div",{className:"relative border-2 border-primaryBlack p-2 py-3",children:[(0,l.jsx)("h1",{className:"absolute -top-3 bg-white px-1",children:"Template & Canvas"}),(0,l.jsx)("button",{onClick:()=>a(),className:"btn btn-primary w-full mb-2",children:"Add Template"}),(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("label",{children:"Zoom"}),(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)("button",{className:"px-2 leading-[1px] text-white bg-primaryBlue",onClick:()=>r("out"),children:"-"}),(0,l.jsx)("p",{className:"",children:100*t.canvasScale}),(0,l.jsx)("button",{className:"px-2 leading-[1px] text-white bg-primaryBlue",onClick:()=>r("in"),children:"+"})]})]})]})};let p=[{label:"Bold",id:"text-bold",property:"fontWeight",checkValue:"bold",uncheckValue:"normal"},{label:"Italic",id:"text-italic",property:"fontStyle",checkValue:"italic",uncheckValue:"normal"},{label:"Underline",id:"text-underline",property:"underline"},{label:"Linethrough",id:"text-linethrough",property:"linethrough"},{label:"Overline",id:"text-overline",property:"overline"}];var b=()=>{let e=(0,r.useRef)(),[t,a]=(0,r.useState)({canvas:null,backgroundColor:"#FDEFEF",fontSize:"32",href:"",color:"#000000",canvasScale:1,backgroundImage:""}),i=(0,r.useCallback)(()=>{let{canvas:e}=t;e.getActiveObjects().forEach(t=>{e.remove(t)})},[t]),g=(0,r.useCallback)(e=>{46===e.which&&i()},[i]);(0,r.useEffect)(()=>{let{clientHeight:l,clientWidth:r}=e.current,s=new n.fabric.Canvas("canvas",{backgroundColor:"#FDEFEF",height:l,width:r,preserveObjectStacking:!0});return a({...t,canvas:s}),document.addEventListener("keydown",g),()=>{document.removeEventListener("keydown",g),s.dispose()}},[]);let b=e=>{let{canvas:l}=t;v(),n.fabric.Image.fromURL(e,e=>{l&&l.setBackgroundImage(e,()=>{l.renderAll()},{scaleX:l.width/e.width,scaleY:l.height/e.height})},{crossOrigin:"anonymous"}),a({...t,backgroundImage:e})},v=()=>{let{canvas:e}=t;a({...t,backgroundImage:""}),e.backgroundImage&&(e.setBackgroundImage(null),e.renderAll())},f=()=>{let{canvas:e}=t,l=e.toDataURL({format:"png",quality:1}),r=document.createElement("a");r.href=l,r.download="awsome-image.png",document.body.appendChild(r),r.click(),document.body.removeChild(r),a({...t,href:l})},j=async()=>{let{canvas:e}=t;if(e.clear(),e)try{let t=JSON.parse(JSON.stringify(s));for(let a of(e.backgroundColor=t.background.value,e.renderAll(),t.objects)){let t=await w(a);t?(e.add(t),e.renderAll()):console.log("UNABLE TO LOAD OBJECT: ",a.type)}}catch(e){console.log(e)}},w=async e=>{let t;switch(e.type){case"StaticText":t=await y(e);break;case"StaticImage":t=await k(e)}return t},y=e=>new Promise((a,l)=>{try{let l=N(e,"text"),r=e.metadata,s=e.canvas.width,c=t.canvas.width,{textAlign:i,fontFamily:o,fontSize:d,fontWeight:h,charSpacing:m,lineheight:g,text:u,padding:x}=r,p={...l,text:u||"Default Text",...i&&{textAlign:i},...o&&{fontFamily:o},...d&&{fontSize:d*c/s},...h&&{fontWeight:h},...m&&{charSpacing:m},...g&&{lineheight:g},...x&&{padding:x}},b=new n.fabric.Text(u,p);a(b)}catch(e){l(e)}}),k=e=>new Promise(async(t,a)=>{try{let a=N(e,"img"),l=e.metadata.src,r=await c(l),{width:s,height:i}=a;s&&i||(a.width=r.width,a.height=r.height);let o=new n.fabric.Image(r,a);t(o)}catch(e){a(e)}}),N=(e,a)=>{let{left:l,top:r,width:n,height:s,scaleX:c,scaleY:i}=e,o=e.metadata?e.metadata:{},{fill:d,angle:h,originX:m,originY:g}=o,u=e.canvas.width,x=e.canvas.height,p=t.canvas.width,b=t.canvas.height;return{angle:h||0,top:r?r*p/u:0,left:l?l*p/u:0,width:"img"===a?n:n*p/u,height:"img"===a?s:s*b/x,originX:m||"left",originY:g||"top",scaleX:c*p/u||1,scaleY:i*p/u||1,fill:d||"#000000",metadata:o}},C=e=>{var l=t.canvas;l.setHeight(l.getHeight()*(e/t.canvasScale)),l.setWidth(l.getWidth()*(e/t.canvasScale));let r=l.getObjects();for(var n in r){let a=r[n].scaleX,l=r[n].scaleY,s=r[n].left,c=r[n].top,i=e/t.canvasScale*a,o=e/t.canvasScale*l,d=e/t.canvasScale*s,h=e/t.canvasScale*c;r[n].scaleX=i,r[n].scaleY=o,r[n].left=d,r[n].top=h,r[n].setCoords()}b(t.backgroundImage),a({...t,canvasScale:e}),l.renderAll()};return(0,l.jsxs)("div",{id:"Canvas",children:[(0,l.jsx)(o,{children:(0,l.jsx)("a",{className:"download",href:t.href,onClick:()=>f(),children:"Download"})}),(0,l.jsxs)("div",{className:"pt-12",children:[(0,l.jsx)("div",{className:"w-[385px] bg-white text-black fixed top-0 left-0 z-40",children:(0,l.jsxs)("div",{className:"flex flex-col max-h-screen overflow-auto pb-14 gap-6 mt-12 p-3",children:[(0,l.jsx)(d,{onImageChange:e=>{let{canvas:a}=t;var l=URL.createObjectURL(e.target.files[0]);n.fabric.Image.fromURL(l,e=>{a.add(e),a.renderAll()},{scaleX:.15,scaleY:.15})}}),(0,l.jsx)(h,{editorState:t,textColorChange:e=>{let{canvas:l}=t;l.getActiveObject()&&(l.getActiveObject().set("fill",e.target.value),l.renderAll()),a({...t,color:e.target.value})},textBgColorChange:e=>{let{canvas:a}=t;a.getActiveObject()&&(a.getActiveObject().set("backgroundColor",e.target.value),a.renderAll())},onFontSize:e=>{if(isNaN(e.target.value))return;let{canvas:l}=t;l.getActiveObject()&&(l.getActiveObject().set("fontSize",e.target.value),l.renderAll()),a({...t,fontSize:e.target.value})},addText:()=>{let{canvas:e}=t;e.add(new n.fabric.IText("Tap and Type",{fontFamily:"arial",fill:t.color,fontSize:32,padding:5,left:0,right:0})),a({...t,canvas:e})}}),(0,l.jsx)(m,{textDecorationData:p,handleTextDecor:(e,l)=>{let{canvas:r}=t,n=e.target.checked,{id:s,checkValue:c,uncheckValue:i,property:o}=l;r.getActiveObject()&&(r.getActiveObject().set(o,n?c||n:i||n),r.renderAll(),a({...t,canvas:r}))}}),(0,l.jsx)(u,{editorState:t,addBackground:b,removeBackground:v,onColorChange:e=>{let{canvas:a}=t;v(),a&&(a.backgroundColor=e.hex,a.renderAll())}}),(0,l.jsx)(x,{editorState:t,addTemplate:j,handleCanvasZoom:e=>{let a=t.canvasScale;switch(e){case"in":t.canvasScale<1&&(a+=.25);break;case"out":t.canvasScale>.25&&(a-=.25)}C(a)}})]})}),(0,l.jsx)("div",{className:"ml-[385px] min-h-screen flex justify-center items-center",children:(0,l.jsx)("canvas",{id:"canvas",className:"w-full h-full border m-auto",ref:e})})]})]})},v=a(703),f=()=>(0,l.jsx)("div",{className:"min-h-screen flex justify-center items-center",children:(0,l.jsx)(v.default,{src:"/assets/animated/loading.svg",height:100,width:100,alt:"loading"})}),j=a(7907),w=()=>{let e=(0,j.useRouter)(),[t,a]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{try{let t=sessionStorage.getItem("user");t||e.push("/signup");let{isLogin:l}=JSON.parse(t);l||e.push("/signup"),a(!0)}catch(e){console.log(e)}},[e]),(0,l.jsx)("main",{className:"min-h-screen",children:t?(0,l.jsx)(b,{}):(0,l.jsx)(f,{})})}}},function(e){e.O(0,[789,884,245,971,69,744],function(){return e(e.s=8218)}),_N_E=e.O()}]);